- defaults:
    link:
        force: true

- clean: ['~']

- shell:
    # - [git submodule update --init --recursive, Installing submodules]
    - [git submodule update --init, Installing submodules]
    -
      command: ./packages/install.sh
      description: Installing software packages
      quiet: false
      stdin: true
      stdout: true
      stderr: true
    -
      command: pip3 install -r ./packages/pipfile
      description: Installing python global modules
      quiet: false
    - [mkdir -p ~/bin, Creating ~/bin]
    - [mkdir -p ~/workspace, Creating ~/workspace]

- link:
    ~/bin/diff-so-fancy:
        path: plugins/diff-so-fancy/diff-so-fancy
        create: true
    ~/.gitconfig: config/gitconfig
    ~/.gitignore_global: config/gitignore_global
    ~/.ngrok2: config/ngrok2
    ~/.secrets:
        path: config/secrets
        force: false
    ~/.source: config/source
    ~/.tmux.conf: config/tmux.conf
    ~/.vim_runtime: plugins/vimrc
    ~/.vscode: vscode
    ~/.zplug: plugins/zplug
    ~/.zshrc: config/zshrc

- shell:
    - [sh ~/.vim_runtime/install_awesome_vimrc.sh, Setting up awesome_vimrc]
    - [if ! zsh -ic "zplug check"; then zsh -ic 'zplug install'; exit 0; fi, Installing zsh plugins]
      # exit 0 cuz https://github.com/zplug/zplug/issues/272
