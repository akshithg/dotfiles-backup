dark_theme=--theme=Catppuccin-mocha
light_theme=--theme=Catppuccin-latte

config_file="$HOME/.config/bat/config"
if [ -L $config_file ]; then
    config_file=$HOME/$(readlink $config_file)
fi

if [ $TERM_PROGRAM = "iTerm.app" ]; then
    if [ -z $(defaults read -g AppleInterfaceStyle 2> /dev/null ) ]; then
        sed -i '' -e 's/$dark_theme/$light_theme/g' ~/.config/bat/config
    else
        sed -i '' -e 's/$light_theme/$dark_theme/g' ~/.config/bat/config
    fi
fi
